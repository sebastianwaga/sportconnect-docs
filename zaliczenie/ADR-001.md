# ADR-001: Wybór architektury i frameworka backendowego

- **Status:** Zaakceptowana
- **Data:** 2025-10-17
- **Autorzy:** Sebastian Waga, Michał Żmuda, Szymon Rogula, Adam Rudziewicz

---

## 1. Kontekst

Nasz projekt wymaga solidnego, wydajnego backendu zdolnego do obsługi wielu kluczowych funkcjonalności. System musi zapewniać autentykację i autoryzację użytkowników z wykorzystaniem JWT, oferować REST API z kompletną dokumentacją OpenAPI oraz obsługiwać operacje CRUD na użytkownikach, kategoriach sportowych i zapytaniach treningowych. Dodatkowo wymagane jest logowanie wszystkich akcji w systemie oraz integracja z bazą danych do obsługi danych geograficznych.

---

## 2. Rozważane opcje

### Opcja 1: ASP.NET Core 8.0

- **Zalety**:
  - [+] Natywne wsparcie dla C# - języka dobrze znanego przez zespół
  - [+] Wbudowane wsparcie dla JWT Bearer Authentication
  - [+] Świetna integracja z Entity Framework Core i PostgreSQL
  - [+] Automatyczna generacja dokumentacji OpenAPI przez Swashbuckle
  - [+] Wysoka wydajność i skalowalność
  - [+] Silne typowanie i kompilacja AOT

- **Wady**:
  - [-] Większy narzut pamięciowy niż niektóre alternatywy
  - [-] Stroma krzywa uczenia dla początkujących

### Opcja 2: Node.js z Express

- **Zalety**:
  - [+] Łatwość prototypowania
  - [+] Duża społeczność i bogaty ekosystem pakietów npm

- **Wady**:
  - [-] Brak natywnego silnego typowania - TypeScript możliwy, ale wymaga dodatkowej konfiguracji, kompilacji, i nauki dla zespołu
  - [-] Mniejsza wydajność przy obciążeniu CPU

### Opcja 3: Java Spring Boot

- **Zalety**:
  - [+] Dojrzały ekosystem z wieloma gotowymi rozwiązaniami
  - [+] Sprawdzony w środowiskach enterprise

- **Wady**:
  - [-] Rozległa składnia wymagająca więcej kodu boilerplate
  - [-] Dłuższy czas startu aplikacji

---

## 3. Decyzja

Wybieramy **ASP.NET Core 8.0** jako framework backendowy.

---

## 4. Uzasadnienie

Wybraliśmy ASP.NET Core, ponieważ zespół backendowy posiada kompetencje w języku C#, co pozwoli na szybkie tempo rozwoju bez konieczności nauki nowej technologii. Natywna integracja z Entity Framework Core znacząco ułatwia pracę z PostgreSQL i umożliwia efektywne zarządzanie migracjami bazy danych. Wbudowane middleware dla JWT Authentication spełnia wszystkie wymagania bezpieczeństwa bez potrzeby implementacji własnych rozwiązań. Swashbuckle zapewnia automatyczną dokumentację OpenAPI, która jest wymaganiem projektu. Dodatkowo, wbudowany Dependency Injection out-of-the-box ułatwia testowanie i zapewnia modularną architekturę kodu.

---

## 5. Konsekwencje

### Pozytywne

- [+] Szybki development dzięki scaffoldingowi kontrolerów i automatycznym generatorom kodu
- [+] Łatwa integracja z bazą danych przez EF Core z pełnym wsparciem dla migracji
- [+] Automatyczna walidacja modeli przez Data Annotations bez dodatkowego kodu
- [+] Gotowe rozwiązania dla logowania (ILogger<T>) i innych cross-cutting concerns

### Negatywne

- [-] Wymaga środowiska .NET SDK do developmentu na maszynach deweloperskich
- [-] Deployment wymaga runtime .NET lub publikacji self-contained, co zwiększa rozmiar artefaktów
